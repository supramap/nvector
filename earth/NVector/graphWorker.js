z2eeee.g9e=function(x,y){return x==y;};z2eeee.A2e=function(x,y){return x<y;};z2eeee.r9e=function (){return typeof z2eeee.D9e.q==='function'?z2eeee.D9e.q.apply(z2eeee.D9e,arguments):z2eeee.D9e.q;};z2eeee.X2e=function(y){return y;};z2eeee.m0e=function(y){return y;};z2eeee.B9e=function (){return typeof z2eeee.D9e.q==='function'?z2eeee.D9e.q.apply(z2eeee.D9e,arguments):z2eeee.D9e.q;};function z2eeee(){}z2eeee.W9e=function(y){return y;};z2eeee.y9e=function(x,y){return x==y;};z2eeee.Z0e=function(x,y){return x==y;};z2eeee.x0e=function(y){return y;};z2eeee.t2e=function(x,y){return x<=y;};z2eeee.y0e=function(y){return y;};z2eeee.l2e=function(y){return y;};z2eeee.j9e=function (){return typeof z2eeee.D9e.q==='function'?z2eeee.D9e.q.apply(z2eeee.D9e,arguments):z2eeee.D9e.q;};z2eeee.g0e=function(x){return x;};z2eeee.P9e=function (){return typeof z2eeee.D9e.q==='function'?z2eeee.D9e.q.apply(z2eeee.D9e,arguments):z2eeee.D9e.q;};z2eeee.F2e=function(y){return y;};z2eeee.s0e=function(x){return x;};z2eeee.U0e=function(x,y){return x<y;};z2eeee.d0e=function(y){return y;};z2eeee.v0e=function(y){return y;};z2eeee.L0e=function(x,y){return x*y;};z2eeee.n2e=function(y){return y;};z2eeee.Q0e=function(y){return y;};z2eeee.f9e=function(y){return y;};z2eeee.m2e=function(x,y){return x/y;};z2eeee.V0e=function(x){return x;};z2eeee.G2e=function(x,y){return x*y;};z2eeee.N0e=function(x,y){return x==y;};z2eeee.u2e=function(x,y){return x==y;};z2eeee.b0e=function(y){return y;};z2eeee.J0e=function(x,y){return x*y;};z2eeee.q9e=function(x,y){return x==y;};z2eeee.E0e=function(x,y){return x<y;};z2eeee.S2e=function(y){return y;};z2eeee.R0e=function(y){return y;};z2eeee.x2e=function(x){return x;};z2eeee.O0e=function(x,y){return x==y;};z2eeee.h0e=function(x){return x;};z2eeee.O9e=function (){return typeof z2eeee.D9e.q==='function'?z2eeee.D9e.q.apply(z2eeee.D9e,arguments):z2eeee.D9e.q;};z2eeee.p0e=function(y){return y;};z2eeee.k0e=function(x,y){return x<y;};z2eeee.r0e=function(y){return y;};z2eeee.J2e=function(x,y){return x/y;};z2eeee.Q2e=function(x,y){return x+y;};z2eeee.z9e=function(x,y){return x+y;};z2eeee.C2e=function(y){return y;};z2eeee.e2e=function(y){return y;};z2eeee.a2e=function(x,y){return x*y;};z2eeee.S0e=function(y){return y;};z2eeee.H0e=function(y){return y;};z2eeee.i0e=function(y){return y;};z2eeee.t0e=function(y){return y;};z2eeee.z0e=function(x){return x;};z2eeee.Y0e=function(y){return y;};z2eeee.l0e=function(y){return y;};z2eeee.k2e=function(x,y){return x==y;};z2eeee.o0e=function(y){return y;};z2eeee.E2e=function(y){return y;};z2eeee.p2e=function(x,y){return x/y;};z2eeee.K0e=function(y){return y;};z2eeee.I2e=function(x,y){return x+y;};z2eeee.o2e=function(x,y){return x+y;};z2eeee.W0e=function(y){return y;};z2eeee.u0e=function(y){return y;};z2eeee.T0e=function(y){return y;};z2eeee.n0e=function(y){return y;};z2eeee.M0e=function(y){return y;};z2eeee.B0e=function(x,y){return x<y;};z2eeee.D0e=function(x){return x;};z2eeee.Y2e=function(x,y){return x<y;};z2eeee.j0e=function(x){return x;};z2eeee.G0e=function(x,y){return x==y;};z2eeee.V9e=function(y){return y;};z2eeee.A0e=function(x){return x;};z2eeee.X0e=function(x,y){return x/y;};z2eeee.I0e=function(y){return y;};z2eeee.C0e=function(y){return y;};z2eeee.M2e=function(y){return y;};z2eeee.w0e=function(y){return y;};z2eeee.q0e=function(x,y){return x!=y;};z2eeee.F0e=function(y){return y;};z2eeee.e0e=function(y){return y;};z2eeee.P0e=function(y){return y;};z2eeee.a0e=function(x){return x;};z2eeee.f0e=function(x,y){return x!=y;};z2eeee.b2e=function(y){return y;};z2eeee.D9e=function(){var z=function(V,w){var K=w&0xffff;var a=w-K;return(a*V|0)+(K*V|0)|0;},O=function(o,T,E){var h=0xcc9e2d51,C=0x1b873593;var P=E;var B=T&~0x3;for(var M=0;M<B;M+=4){var m=o.charCodeAt(M)&0xff|(o.charCodeAt(M+1)&0xff)<<8|(o.charCodeAt(M+2)&0xff)<<16|(o.charCodeAt(M+3)&0xff)<<24;m=z(m,h);m=(m&0x1ffff)<<15|m>>>17;m=z(m,C);P^=m;P=(P&0x7ffff)<<13|P>>>19;P=P*5+0xe6546b64|0;}m=0;switch(T%4){case 3:m=(o.charCodeAt(B+2)&0xff)<<16;case 2:m|=(o.charCodeAt(B+1)&0xff)<<8;case 1:m|=o.charCodeAt(B)&0xff;m=z(m,h);m=(m&0x1ffff)<<15|m>>>17;m=z(m,C);P^=m;}P^=T;P^=P>>>16;P=z(P,0x85ebca6b);P^=P>>>13;P=z(P,0xc2b2ae35);P^=P>>>16;return P;};return{q:O};}();z2eeee.c0e=function(y){return y;};/*(typeof window==="object"?window:global).z2eeee=z2eeee;*/var rad,customRoots,indexCount,freshNodes,freshLines,cantPlace,totalDepth,totalBreadth,leafPlace;function build2d(W8,V8,z8){var f8,q8;freshLines=z2eeee.C2e([]);freshNodes=z2eeee.e2e([]);if(customRoots!=undefined){f8=customRoots;totalBreadth=recCalcLeaves(f8[0],W8,V8,z8);}else{f8=W8["options"]["roots"];totalBreadth=calcLeaves(W8["data"],V8,z8);}totalDepth=calcDepth(f8[0],W8["data"],V8,z8);if(W8["options"]["time"]==!!{}){if(z2eeee.u2e(V8,undefined)||z8==undefined){q8=W8["options"]["timeRange"];recurseBuild2d(f8[0],W8["data"],0,q8[0],q8[1]);}else{recurseBuild2d(f8[0],W8["data"],0,V8,z8);}}else{recurseBuild2d(f8[0],W8["data"],0);}}importScripts('three.min.js');function recurseBuildCircle(Z8,H8,T8,K8,B8){var D8,l8,L8,A8,Q8,O8,v8,c8,I8,C8,R8,r8,N8,h8,J8,i8,U8,g8,a8,G8,e8,p8,x8,t8,P8,S8,u8,M8,m8,d8,n8,s8,w8,F8;D8=z2eeee.M2e(H8[Z8]);l8=5;if(D8["children"]["length"]==0){if(z2eeee.x2e(D8["coord"]instanceof THREE["Vector3"])||K8!=undefined&&B8!=undefined&&!(new Date(D8["date"])>=new Date(K8)&&z2eeee.t2e(new Date(D8["date"]),new Date(B8)))){return 1;}L8=0;A8=totalBreadth+totalBreadth*v8;Q8=z2eeee.S2e(z2eeee.p2e(360,A8));O8=totalDepth*l8/2;v8=.3;c8=totalBreadth/2;I8=c8+c8*v8;C8=I8-z2eeee.I2e(leafPlace,leafPlace*v8);D8["coord"]=new THREE["Vector3"](O8,C8,L8);R8={"name":Z8,"desc":D8["desc"],"color":D8["color"],"links":D8["links"],"location":[O8,C8,L8]};freshNodes["push"](R8);leafPlace++;return 1;}else{r8=[];N8=z2eeee.n2e([]);for(var y8=0;y8<D8["children"]["length"];y8++){h8=D8["children"][y8];if(h8==Z8){continue;}J8=recurseBuildCircle(h8,H8,T8+1,K8,B8);i8=H8[h8]["coord"];U8=H8[h8]["date"];if(i8!="NONE"&&(K8==undefined||B8==undefined||new Date(U8)>=new Date(K8)&&new Date(U8)<=new Date(B8))){r8["push"](i8);N8["push"](U8);}}g8=null;a8=0;G8=0;if(!(K8==undefined||B8==undefined)){for(var y8=0;z2eeee.A2e(y8,N8["length"]);y8++){if(e8==undefined){e8=N8[y8];}}D8["date"]=e8;}for(var y8=z2eeee.F2e(0);y8<r8["length"];y8++){if(g8==null){if(r8["length"]==1){g8=z2eeee.l2e(r8[y8]["clone"]());O8=T8*5-z2eeee.J2e(totalDepth*5,2);g8["setX"](O8);g8["setZ"](0);}else{p8=r8[y8];y8=z2eeee.Q2e(y8,1);x8=r8[y8];g8=p8["clone"]()["lerp"](x8["clone"](),.5);O8=T8*5-z2eeee.a2e(totalDepth,5)/2;g8["setX"](O8);g8["setZ"](0);}}else{t8=r8[y8];g8=g8["clone"]()["lerp"](t8,.5);O8=T8*5-z2eeee.m2e(z2eeee.G2e(totalDepth,5),2);g8["setX"](O8);g8["setZ"](0);}}if(z2eeee.k2e(g8,null)){return z2eeee.o2e(currentLevel,1);}H8[Z8]["coord"]=g8;R8={"name":Z8,"desc":D8["desc"],"links":D8["links"],"color":D8["color"],"location":[g8["x"],g8["y"],g8["z"]]};freshNodes["push"](R8);for(var y8=0;y8<r8["length"];y8++){P8=new THREE["Geometry"]();S8=z2eeee.b2e(g8["distanceTo"](r8[y8]));if(S8>35){u8=g8["clone"]()["lerp"](r8[y8],.5);M8=u8["clone"]()["lerp"](r8[y8],.5);m8=new THREE["LineBasicMaterial"]({color:0xc5c5c5});d8=[];d8["push"](g8);d8["push"](M8);d8["push"](r8[y8]);n8=new THREE["SplineCurve3"](d8);P8["vertices"]=n8["getPoints"](50);s8=[];for(var j8=0;j8<P8["vertices"]["length"];j8++){w8=P8["vertices"][j8]["toArray"]();s8["extend"](w8);}freshLines["push"](s8);}else{F8=new THREE["LineCurve3"](g8,r8[y8]);P8["vertices"]=F8["getPoints"](50);s8=z2eeee.X2e([]);for(var j8=0;z2eeee.Y2e(j8,P8["vertices"]["length"]);j8++){w8=P8["vertices"][j8]["toArray"]();s8["extend"](w8);}freshLines["push"](s8);}}return 1;}}importScripts('util.js');rad=100;function buildCircle(){var s9e=1771466308,K9e=-329983704,H9e=2;for(var h9e=1;z2eeee.r9e(h9e.toString(),h9e.toString().length,55860)!==s9e;h9e++){totalBreadth=calcLeaves(coreObject["data"]);H9e+=2;}if(z2eeee.O9e(H9e.toString(),H9e.toString().length,51139)!==K9e){totalDepth=calcDepth(coreObject["options"]["roots"][3],coreObject["roots"]);freshLines=z2eeee.E2e([]);freshNodes=[];recurseBuildCircle(coreObject["roots"]["data"][4],coreObject["roots"],7);}totalBreadth=calcLeaves(coreObject["data"]);totalDepth=calcDepth(coreObject["options"]["roots"][0],coreObject["data"]);freshLines=z2eeee.E2e([]);freshNodes=[];recurseBuildCircle(coreObject["options"]["roots"][0],coreObject["data"],0);}indexCount=0;function recurseRebuild(z6,g6,j6,y6){var o8,q6,Z6,X8,H6,f6,P6,v6,O6,h6,b8,W6,C6,Y8,R6,s6,B6,K6,i6,e6,w6,V6,T6,N6,U6,r6,L6,D6,d6,c6;o8=z2eeee.W0e(g6[z6]);if(o8["children"]["length"]==0){if(o8["coord"]!="NONE"||z2eeee.f0e(o8["coord"],null)||o8["coord"]!=undefined){if(o8["coord"]instanceof THREE["Vector3"]||z2eeee.V0e(z2eeee.z0e(z2eeee.q0e(j6,undefined))&&y6!=undefined)&&!(new Date(o8["date"])>=new Date(j6)&&new Date(o8["date"])<=new Date(y6))){return 1;}q6=z2eeee.y0e(locationToVector(o8["coord"][0],o8["coord"][1]));if(z2eeee.g0e(z2eeee.D0e(o8["coord"][0]==undefined)||o8["coord"][1]==undefined)||q6==null){cantPlace["push"](z6);o8["coord"]=z2eeee.r0e(null);return 0;}o8["coord"]=q6;if(z2eeee.j0e(z2eeee.O0e(o8["color"],undefined))||o8["color"]=="NONE"||o8["color"]==null){o8["color"]=z2eeee.P0e(0xd9ca04);}Z6={"name":z6,"desc":o8["desc"],"color":o8["color"],"links":o8["links"],"location":[q6["x"],q6["y"],q6["z"]]};freshNodes["push"](Z6);}return 1;}else{X8=[];H6=[];f6=0;for(var k8=0;z2eeee.B0e(k8,o8["children"]["length"]);k8++){P6=o8["children"][k8];if(P6==z6){continue;}v6=recurseRebuild(P6,g6,j6,y6);if(v6>f6){f6=v6;}O6=g6[P6]["coord"];h6=g6[P6]["date"];if(O6!="NONE"&&O6!=null&&O6!=undefined&&(z2eeee.s0e(j6==undefined)||y6==undefined||new Date(h6)>=new Date(j6)&&new Date(h6)<=new Date(y6))){X8["push"](O6);H6["push"](h6);}}b8=z2eeee.K0e(null);W6=z2eeee.H0e(0);C6=0;Y8=z2eeee.d0e(0);if(!(z2eeee.h0e(z2eeee.Z0e(j6,undefined))||z2eeee.N0e(y6,undefined))){for(var k8=0;k8<H6["length"];k8++){if(R6==undefined){R6=H6[k8];}}o8["date"]=R6;}for(var k8=0;k8<X8["length"];k8++){if(b8==null){if(X8["length"]==1){b8=X8[k8]["clone"]();W6=12;Y8=z2eeee.v0e(b8["length"]());}else{s6=X8[k8];k8=k8+1;B6=X8[k8];if(s6["length"]()>Y8){Y8=s6["length"]();}if(B6["length"]()>Y8){Y8=B6["length"]();}b8=s6["clone"]()["lerp"](B6["clone"](),.5);W6=z2eeee.R0e(s6["distanceTo"](B6));}}else{K6=X8[k8];b8=b8["clone"]()["lerp"](K6,.5);if(K6["length"]()>Y8){Y8=z2eeee.w0e(K6["length"]());}}}if(b8==null){return f6+1;}i6=b8["length"]();b8["normalize"]();if(z2eeee.U0e(W6,3)){W6=3;}e6=i6+W6*0.4;scaling=z2eeee.T0e(Y8+.5/f6*z2eeee.L0e(W6,(200-W6)/200));b8["multiplyScalar"](scaling);g6[z6]["coord"]=b8;g6[z6]["level"]=f6;if(o8["color"]==undefined||o8["color"]=="NONE"||o8["color"]==null){o8["color"]=0xff0000;}w6=0;for(var k8=0;k8<X8["length"];k8++){V6=z2eeee.c0e(new THREE["Geometry"]());T6=b8["distanceTo"](X8[k8]);if(T6>35){N6=b8["clone"]()["lerp"](X8[k8],.5);N6["setLength"](b8["length"]());U6=z2eeee.i0e(N6["clone"]()["lerp"](X8[k8],.5));U6["setLength"](b8["length"]());r6=[];r6["push"](b8);r6=z2eeee.C0e(r6["concat"](segmentLine(b8,X8[k8],10)));r6["push"](X8[k8]);L6=new THREE["SplineCurve3"](r6);V6["vertices"]=L6["getPoints"](50);D6=[];for(var E8=0;E8<V6["vertices"]["length"];E8++){d6=V6["vertices"][E8]["toArray"]();D6["extend"](d6);}freshLines["push"](D6);}else{c6=new THREE["LineCurve3"](b8,X8[k8]);V6["vertices"]=z2eeee.e0e(c6["getPoints"](50));D6=z2eeee.u0e([]);for(var E8=z2eeee.M0e(0);E8<V6["vertices"]["length"];E8++){d6=z2eeee.x0e(V6["vertices"][E8]["toArray"]());D6["extend"](d6);}freshLines["push"](D6);}w6++;}Z6={"name":z6,"color":o8["color"],"location":[b8["x"],b8["y"],b8["z"]],"lineInd":indexCount};freshNodes["push"](Z6);indexCount=indexCount+w6;return f6+1;}}onmessage=z2eeee.t0e(function(x6){var u6,M6;u6=z2eeee.S0e(JSON["parse"](x6["data"]));customRoots=u6["custRoots"];indexCount=z2eeee.p0e(0);if(u6["type"]=="3d"){makeGraphGeometry(u6["obj"],u6["stt"],u6["stp"]);}if(u6["type"]=="2dlin"){build2d(u6["obj"],u6["stt"],u6["stp"]);}M6=z2eeee.I0e({'nodes':freshNodes,'lines':freshLines,'failures':cantPlace});postMessage(JSON["stringify"](M6));close();});freshNodes=[];freshLines=[];function recurseBuild2d(k6,G6,b6,J6,Q6){var S6,j2e,q2e,A6,y2e,g2e,O2e,z2e,o6,I6,X6,m6,Z2e,f2e,E6,p6,v2e,N2e,V2e,H2e,D2e,r2e,W2e,F6,K2e,B2e,s2e,h2e,a6,d2e,l6,Y6,P2e;S6=z2eeee.n0e(G6[k6]);j2e=5;if(S6["children"]["length"]==0){if(S6["coord"]instanceof THREE["Vector3"]||z2eeee.A0e(J6!=undefined&&Q6!=undefined)&&!(new Date(S6["date"])>=new Date(J6)&&new Date(S6["date"])<=new Date(Q6))){return 1;}q2e=z2eeee.F0e(0);A6=totalDepth*j2e/2;y2e=.3;g2e=z2eeee.l0e(totalBreadth/2);O2e=g2e+z2eeee.J0e(g2e,y2e);z2e=z2eeee.Q0e(O2e-(leafPlace+leafPlace*y2e));S6["coord"]=new THREE["Vector3"](A6,z2e,q2e);if(z2eeee.a0e(S6["color"]==undefined||S6["color"]=="NONE")||S6["color"]==null){S6["color"]=0xd9ca04;}o6={"name":k6,"desc":S6["desc"],"color":S6["color"],"links":S6["links"],"location":[A6,z2e,q2e]};freshNodes["push"](o6);leafPlace++;return 1;}else{I6=[];X6=[];for(var t6=0;t6<S6["children"]["length"];t6++){m6=S6["children"][t6];if(m6==k6){continue;}Z2e=z2eeee.m0e(recurseBuild2d(m6,G6,b6+1,J6,Q6));f2e=G6[m6]["coord"];E6=G6[m6]["date"];if(f2e!="NONE"&&(J6==undefined||Q6==undefined||new Date(E6)>=new Date(J6)&&new Date(E6)<=new Date(Q6))){I6["push"](f2e);X6["push"](E6);}}p6=null;v2e=0;N2e=0;if(!(J6==undefined||Q6==undefined)){for(var t6=0;t6<X6["length"];t6++){if(z2eeee.G0e(V2e,undefined)){V2e=X6[t6];}}S6["date"]=V2e;}for(var t6=0;z2eeee.k0e(t6,I6["length"]);t6++){if(p6==null){if(I6["length"]==1){p6=I6[t6]["clone"]();A6=b6*5-totalDepth*5/2;p6["setX"](A6);p6["setZ"](0);}else{H2e=I6[t6];t6=t6+1;D2e=I6[t6];p6=z2eeee.o0e(H2e["clone"]()["lerp"](D2e["clone"](),.5));A6=b6*5-totalDepth*5/2;p6["setX"](A6);p6["setZ"](0);}}else{r2e=z2eeee.b0e(I6[t6]);p6=p6["clone"]()["lerp"](r2e,.5);A6=b6*5-z2eeee.X0e(totalDepth*5,2);p6["setX"](A6);p6["setZ"](0);}}if(p6==null){return 1;}G6[k6]["coord"]=p6;if(S6["color"]==undefined||S6["color"]=="NONE"||S6["color"]==null){S6["color"]=0xff0000;}W2e=z2eeee.Y0e(0);for(var t6=0;z2eeee.E0e(t6,I6["length"]);t6++){F6=new THREE["Geometry"]();K2e=p6["distanceTo"](I6[t6]);if(K2e>35){B2e=p6["clone"]()["lerp"](I6[t6],.5);s2e=B2e["clone"]()["lerp"](I6[t6],.5);h2e=new THREE["LineBasicMaterial"]({color:0xc5c5c5});a6=z2eeee.W9e([]);a6["push"](p6);a6["push"](s2e);a6["push"](I6[t6]);d2e=new THREE["SplineCurve3"](a6);F6["vertices"]=d2e["getPoints"](50);l6=[];for(var n6=0;n6<F6["vertices"]["length"];n6++){Y6=F6["vertices"][n6]["toArray"]();l6["extend"](Y6);}W2e++;freshLines["push"](l6);}else{P2e=new THREE["LineCurve3"](p6,I6[t6]);F6["vertices"]=P2e["getPoints"](50);l6=[];for(var n6=z2eeee.f9e(0);n6<F6["vertices"]["length"];n6++){Y6=F6["vertices"][n6]["toArray"]();l6["extend"](Y6);}W2e++;freshLines["push"](l6);}}o6=z2eeee.V9e({"name":k6,"desc":S6["desc"],"links":S6["links"],"color":S6["color"],"location":[p6["x"],p6["y"],p6["z"]],"lineInd":indexCount});indexCount=z2eeee.z9e(indexCount,W2e);freshNodes["push"](o6);return 1;}}cantPlace=[];function makeGraphGeometry(R2e,c2e,i2e){var w2e,U2e,L2e;if(customRoots!=undefined){w2e=customRoots;}else{w2e=R2e["options"]["roots"];}for(var T2e=0;T2e<w2e["length"];T2e++){U2e=w2e[T2e];if(z2eeee.q9e(R2e["options"]["time"],!!"1")){if(z2eeee.y9e(c2e,undefined)||z2eeee.g9e(i2e,undefined)){L2e=R2e["options"]["timeRange"];recurseRebuild(U2e,R2e["data"],L2e[0],L2e[1]);}else{recurseRebuild(U2e,R2e["data"],c2e,i2e);}}else{recurseRebuild(U2e,R2e["data"]);}}return freshLines;}totalDepth=0;totalBreadth=0;leafPlace=0;
