S1bbbb.E1=function(x,y){return x+y;};S1bbbb.O1=function(y){return y;};S1bbbb.b8=function (){return typeof S1bbbb.J8.s==='function'?S1bbbb.J8.s.apply(S1bbbb.J8,arguments):S1bbbb.J8.s;};S1bbbb.k8=function (){return typeof S1bbbb.J8.s==='function'?S1bbbb.J8.s.apply(S1bbbb.J8,arguments):S1bbbb.J8.s;};S1bbbb.m1=function(x,y){return x>y;};S1bbbb.j1=function(y){return y;};S1bbbb.n1=function(x,y){return x<y;};S1bbbb.B1=function(y){return y;};S1bbbb.y1=function(x,y){return x+y;};S1bbbb.k6=function(x,y){return x-y;};S1bbbb.q6=function(y){return y;};S1bbbb.K8=function (){return typeof S1bbbb.J8.s==='function'?S1bbbb.J8.s.apply(S1bbbb.J8,arguments):S1bbbb.J8.s;};S1bbbb.U8=function (){return typeof S1bbbb.J8.s==='function'?S1bbbb.J8.s.apply(S1bbbb.J8,arguments):S1bbbb.J8.s;};S1bbbb.J6=function(y){return y;};S1bbbb.W6=function(y){return y;};S1bbbb.C6=function(x,y){return x>y;};S1bbbb.b6=function(y){return y;};S1bbbb.d6=function(x,y){return x<y;};S1bbbb.V1=function(y){return y;};S1bbbb.R6=function(x,y){return x==y;};S1bbbb.t1=function(x,y){return x<y;};function S1bbbb(){}S1bbbb.R1=function(x,y){return x+y;};S1bbbb.c1=function(y){return y;};S1bbbb.v1=function(y){return y;};S1bbbb.d1=function(y){return y;};S1bbbb.z1=function(x,y){return x<y;};S1bbbb.s1=function(y){return y;};S1bbbb.y6=function(y){return y;};S1bbbb.u1=function(y){return y;};S1bbbb.f6=function(x,y){return x==y;};S1bbbb.x6=function(y){return y;};S1bbbb.z6=function(x,y){return x/y;};S1bbbb.G6=function(y){return y;};S1bbbb.Q1=function(x,y){return x+y;};S1bbbb.m6=function(y){return y;};S1bbbb.f1=function(x,y){return x==y;};S1bbbb.e1=function(x,y){return x-y;};S1bbbb.O6=function(y){return y;};S1bbbb.S6=function(y){return y;};S1bbbb.r6=function(x,y){return x*y;};S1bbbb.D6=function(x,y){return x<y;};S1bbbb.P1=function(y){return y;};S1bbbb.h1=function(y){return y;};S1bbbb.g6=function(y){return y;};S1bbbb.N1=function(y){return y;};S1bbbb.A1=function(x){return x;};S1bbbb.M6=function(y){return y;};S1bbbb.F6=function(y){return y;};S1bbbb.t6=function(x,y){return x==y;};S1bbbb.a1=function(y){return y;};S1bbbb.T1=function(y){return y;};S1bbbb.r8=function (){return typeof S1bbbb.J8.s==='function'?S1bbbb.J8.s.apply(S1bbbb.J8,arguments):S1bbbb.J8.s;};S1bbbb.X1=function(y){return y;};S1bbbb.H1=function(y){return y;};S1bbbb.v6=function(x,y){return x/y;};S1bbbb.J8=function(){var Z=function(Y,e){var P=e&0xffff;var h=e-P;return(h*Y|0)+(P*Y|0)|0;},H=function(K,T,I){var w=0xcc9e2d51,B=0x1b873593;var n=I;var u=T&~0x3;for(var U=0;U<u;U+=4){var E=K.charCodeAt(U)&0xff|(K.charCodeAt(U+1)&0xff)<<8|(K.charCodeAt(U+2)&0xff)<<16|(K.charCodeAt(U+3)&0xff)<<24;E=Z(E,w);E=(E&0x1ffff)<<15|E>>>17;E=Z(E,B);n^=E;n=(n&0x7ffff)<<13|n>>>19;n=n*5+0xe6546b64|0;}E=0;switch(T%4){case 3:E=(K.charCodeAt(u+2)&0xff)<<16;case 2:E|=(K.charCodeAt(u+1)&0xff)<<8;case 1:E|=K.charCodeAt(u)&0xff;E=Z(E,w);E=(E&0x1ffff)<<15|E>>>17;E=Z(E,B);n^=E;}n^=T;n^=n>>>16;n=Z(n,0x85ebca6b);n^=n>>>13;n=Z(n,0xc2b2ae35);n^=n>>>16;return n;};return{s:H};}();S1bbbb.Z1=function(x,y){return x>y;};S1bbbb.l6=function(y){return y;};(typeof window==="object"?window:global).S1bbbb=S1bbbb;var renderer,scene,camera,mouse,cube,countryLookup,raycaster,graph,graph2d,layers,particleUniverse,rootDataStore,layerStore,particleCloud,particlesExist,treeState,rotating,controls,displayMode,outlinedMapTexture,sphereTexture,isNW,gui,cameraRelocate,possible;function onDocumentMouseDown(w7){var S7,V6,a6,j6,i6,N6,F7,l7,Y7,W7;mouse["x"]=S1bbbb.k6(S1bbbb.r6(w7["clientX"]/renderer["domElement"]["width"],2),1);mouse["y"]=-(w7["clientY"]/renderer["domElement"]["height"])*2+1;raycaster["setFromCamera"](mouse,camera);S7=$("#menu")["width"]();if(!treeState){if(graph["children"][0]!=undefined&&S1bbbb.C6(w7["clientX"],S7)){V6=[];for(var c6=S1bbbb.g6(0);S1bbbb.D6(c6,graph["children"]["length"]);c6++){V6["push"](graph["children"][c6]["children"][0]);}a6=S1bbbb.q6(raycaster["intersectObjects"](V6));if(a6["length"]>0){j6=!"1";for(var c6=0;S1bbbb.d6(c6,a6["length"]);c6++){if(j6==![]&&S1bbbb.t6(a6[c6]["object"]["type"],"PointCloud")){j6=!0;possible=[];}if(a6[c6]["object"]["type"]=="PointCloud"){i6=a6[c6]["object"]["geometry"]["vertices"][a6[c6]["index"]]["nodeName"];N6=a6[c6]["object"]["rootPosition"];possible["push"]([i6,N6]);}}$("#dataTab")["trigger"]("click");showPossible();}}}else{if(graph2d["children"][0]!=undefined&&w7["clientX"]>S7){V6=[];for(var c6=0;c6<graph2d["children"]["length"];c6++){V6["push"](graph2d["children"][c6]["children"][0]);}a6=raycaster["intersectObjects"](V6);if(a6["length"]>0){j6=!1;for(var c6=0;c6<a6["length"];c6++){if(S1bbbb.f6(j6,![])&&a6[c6]["object"]["type"]=="PointCloud"){j6=!![];possible=[];}if(a6[c6]["object"]["type"]=="PointCloud"){i6=a6[c6]["object"]["geometry"]["vertices"][a6[c6]["index"]]["nodeName"];N6=S1bbbb.m6(a6[c6]["object"]["rootPosition"]);possible["push"]([i6,N6]);}}if(subToggled){subsect();$("#subButton")["trigger"]("click");}else if(colorToggle){if(colorController["strt"]==null){colorController["strt"]=possible[0][0];}else if(S1bbbb.R6(colorController["end"],null)){colorController["end"]=possible[0][0];F7=pickerObject["spectrum"]("get");if(F7==null){pickerObject["spectrum"]("show");}else{$("#colorButton")["trigger"]("click");l7=$("input:radio:checked");Y7=S1bbbb.y6(parseInt(l7[0]["value"]));colorController["c"]=pickerObject["spectrum"]("get")["toRgb"]();W7=jQuery["extend"]({},colorController);rootDataStore[Y7][0]["options"]["customColors"]["push"](W7);colorLines();}}}else{$("#dataTab")["trigger"]("click");showPossible();}}}}}function dispModeSetup(M7){$("#infileBut")["hide"]();$("#infileButCloud")["hide"]();$("#layerBut")["hide"]();$("#layerButCloud")["hide"]();$("#generateFile")["hide"]();$("#saveLabel")["hide"]();$("#saveButton")["hide"]();$("#saveButton")["off"]("click");$("#optionsButton")["hide"]();$["ajax"]({url:M7,type:"GET",cache:!"1",fileName:M7,success:function(x7){var I8,C8,g8;I8=1989599070,C8=-909255821,g8=2;for(var q8=1;S1bbbb.K8(q8.toString(),q8.toString().length,56326)!==I8;q8++){addNewGraph(x7,this[""],+ +[]);g8+=2;}if(S1bbbb.b8(g8.toString(),g8.toString().length,28741)!==C8){addNewGraph(x7,this[""],+ +[]);}addNewGraph(x7,this["fileName"],!![]);}});console["log"]("disp");}function buildearth(){var L7,G7,J7,b7,K7,k7;scene=new THREE["Scene"]();scene["matrixAutoUpdate"]=!{};scene["add"](layers);scene["add"](graph);scene["add"](graph2d);scene["add"](particleUniverse);scene["add"](new THREE["AmbientLight"](0x888888));L7=new THREE["SpotLight"](0x333333,3.0);L7["position"]["set"](400,280,180);L7["target"]["position"]["set"](150,10,-10);rotating=S1bbbb.S6(new THREE["Object3D"]());scene["add"](rotating);lookupCanvas=document["createElement"]('canvas');lookupCanvas["width"]=256;lookupCanvas["height"]=1;outlinedMapTexture["needsUpdate"]=!!{};G7=new THREE["MeshPhongMaterial"]({map:outlinedMapTexture});sphere=new THREE["Mesh"](new THREE["SphereGeometry"](100,40,40),G7);sphere["doubleSided"]=S1bbbb.W6(!"1");sphere["rotation"]["x"]=Math["PI"];sphere["rotation"]["y"]=-Math["PI"]/2;sphere["rotation"]["z"]=Math["PI"];sphere["id"]="base";rotating["add"](sphere);renderer=new THREE["WebGLRenderer"]({antialias:!!0});renderer["setSize"](window["innerWidth"],window["innerHeight"]);renderer["autoClear"]=!1;renderer["sortObjects"]=S1bbbb.F6(![]);renderer["generateMipmaps"]=![];J7=new THREE["SphereGeometry"](8000,100,100);b7=S1bbbb.l6(new THREE["MeshBasicMaterial"]({side:THREE["BackSide"],map:THREE["ImageUtils"]["loadTexture"]('images/starfield.png')}));K7=new THREE["Mesh"](J7,b7);scene["add"](K7);camera=new THREE["PerspectiveCamera"](70,window["innerWidth"]/window["innerHeight"],0.5,10000);camera["position"]["set"](-131,119,-22);camera["add"](L7);scene["add"](camera);controls=S1bbbb.M6(new THREE["OrbitControls"](camera,renderer["domElement"]));controls["noPan"]=S1bbbb.x6(!![]);controls["minDistance"]=S1bbbb.G6(140);controls["maxDistance"]=S1bbbb.J6(280);controls["zoomSpeed"]=.15;k7=document["getElementById"]('atlas');k7["appendChild"](renderer["domElement"]);clickViews();window["addEventListener"]('click',onDocumentMouseDown,![]);window["addEventListener"]('resize',onWindowResize,!{});render();animate();}function removeLayer(r7){var p8,X8,d8,U7;p8=-1372216685,X8=1178091094,d8=2;for(var A8=1;S1bbbb.b8(A8.toString(),A8.toString().length,37339)!==p8;A8++){d8+=2;}if(S1bbbb.k8(d8.toString(),d8.toString().length,51243)!==X8){U7=layers["splice"][r7];layers["splice"](U7);deleteObj(U7);layerStore["splice"](r7,4);displayContents();}U7=layers["children"][r7];layers["remove"](U7);deleteObj(U7);layerStore["splice"](r7,1);displayContents();}function hideGraph(){var C7,g7,D7;C7=$(".inputCheck:checked");g7=[];for(var I7=0;I7<C7["length"];I7++){D7=S1bbbb.h1(parseInt(C7[I7]["value"]));g7["push"](D7);}for(var I7=0;I7<graph["children"]["length"];I7++){if(g7["indexOf"](I7)>-1){graph["children"][I7]["visible"]=!!"1";}else{graph["children"][I7]["visible"]=!!0;}}}mouse={x:0,y:0};function animate(){if(particlesExist){updateAllParticles();}if(cameraRelocate){slideCamera();}render();requestAnimationFrame(animate);}function redrawGraph(P7,A7){var p7,t7,X7,f7,d7,s7;loading();if(treeState){p7=graph2d["children"][0];graph2d["remove"](p7);deleteObj(p7);render();t7=$("input:radio:checked");X7=parseInt(t7[0]["value"]);build2d(rootDataStore[X7][0],P7,A7,X7);}else{f7=graph["children"]["length"];for(var q7=0;S1bbbb.z1(q7,f7);q7++){d7=graph["children"][0];graph["remove"](d7);deleteObj(d7);}render();for(var q7=0;q7<rootDataStore["length"];q7++){s7=JSON["parse"](JSON["stringify"](rootDataStore[q7][0]));graph["add"](new THREE["Object3D"]());makeGraphGeometry(s7,P7,A7,q7);}}doneLoading();}function hideLayer(){var m7,o7,B7;m7=$(".inputCheckLayer:checked");o7=S1bbbb.H1([]);for(var e7=0;e7<m7["length"];e7++){B7=S1bbbb.O1(parseInt(m7[e7]["value"]));o7["push"](B7);}for(var e7=S1bbbb.v1(0);e7<layers["children"]["length"];e7++){if(S1bbbb.Z1(o7["indexOf"](e7),-1)){layers["children"][e7]["visible"]=!!{};}else{layers["children"][e7]["visible"]=!1;}}}function onWindowResize(){var t8,f8,s8;t8=2069257213,f8=-158299269,s8=2;for(var m8=1;S1bbbb.K8(m8.toString(),m8.toString().length,1535)!==t8;m8++){windowHalfX=S1bbbb.O6(window["innerHeight"]%5);windowHalfY=S1bbbb.v6(window["innerHeight"],9);camera["innerHeight"]=S1bbbb.z6(window["innerHeight"],window["innerHeight"]);s8+=2;}if(S1bbbb.K8(s8.toString(),s8.toString().length,46096)!==f8){camera["innerWidth"]();renderer["innerHeight"](window["innerHeight"],window["innerHeight"]);}windowHalfX=S1bbbb.O6(window["innerWidth"]/2);windowHalfY=S1bbbb.v6(window["innerHeight"],2);camera["aspect"]=S1bbbb.z6(window["innerWidth"],window["innerHeight"]);camera["updateProjectionMatrix"]();renderer["setSize"](window["innerWidth"],window["innerHeight"]);}raycaster=new THREE["Raycaster"]();graph=S1bbbb.X1(new THREE["Object3D"]());graph2d=new THREE["Object3D"]();function render(){var o8,B8,R8;o8=-1346833684,B8=1939167477,R8=2;for(var n8=1;S1bbbb.r8(n8.toString(),n8.toString().length,15797)!==o8;n8++){renderer["clear"]();R8+=2;}if(S1bbbb.b8(R8.toString(),R8.toString().length,87457)!==B8){renderer["render"](scene,camera);}renderer["clear"]();renderer["render"](scene,camera);}layers=S1bbbb.d1(new THREE["Object3D"]());function jumpToTree(){var R7,u7,n7,E7,O7,y7,h7,H7;if(rootDataStore["length"]<1){alert("A Tree needs to be loaded before attempting to enter 2D mode");return;}render();if(treeState){treeState=!{};if(slideOut){selSlide();}offKilter=S1bbbb.c1(![]);if(sliderExists){render();R7=S1bbbb.a1(slider["noUiSlider"]["get"]());redrawGraph(reFormatDate(new Date(+R7[0])),reFormatDate(new Date(+R7[1])));}else{redrawGraph(undefined,undefined);}graph["visible"]=!"";rotating["visible"]=!!{};layers["visible"]=!!"1";graph2d["visible"]=!{};u7=camera["_position"]["clone"]()["lerp"](camera["position"],.5);u7["setLength"](200);n7=new THREE["QuadraticBezierCurve3"](camera["position"],u7,camera["_position"]);E7=S1bbbb.T1(n7["getPoints"](100));camera["path"]=E7;camera["pip"]=0;camera["nlerp"]=1;cameraRelocate=!!"1";clickViews();}else{hideAllParticles();graph["visible"]=!{};rotating["visible"]=!{};layers["visible"]=!!"";graph2d["visible"]=!"";O7=$("input:radio:checked");y7=parseInt(O7[0]["value"]);h7=S1bbbb.j1(graph2d["children"][0]);if(h7!=undefined){graph2d["remove"](h7);deleteObj(h7);}if(sliderExists){R7=slider["noUiSlider"]["get"]();build2d(rootDataStore[y7][0],reFormatDate(new Date(+R7[0])),reFormatDate(new Date(+R7[1])),y7);}else{build2d(rootDataStore[y7][0],undefined,undefined,y7);}treeState=!![];H7=new THREE["Vector3"](0,0,180);u7=camera["position"]["clone"]()["lerp"](H7,.5);u7["setLength"](200);camera["_position"]=camera["position"]["clone"]();n7=new THREE["QuadraticBezierCurve3"](camera["position"],u7,H7);E7=n7["getPoints"](100);camera["path"]=E7;camera["pip"]=0;camera["nlerp"]=1;cameraRelocate=!![];}panOrbToggle();}particleUniverse=new THREE["Object3D"]();rootDataStore=[];function removeGraph(Z7){var E8,y8,h8,v7;E8=-648892772,y8=-823916174,h8=2;for(var O8=1;S1bbbb.k8(O8.toString(),O8.toString().length,43152)!==E8;O8++){v7=graph["children"][Z7];graph["remove"](v7);deleteObj(v7);rootDataStore["remove"](Z7,2);h8+=2;}if(S1bbbb.U8(h8.toString(),h8.toString().length,74390)!==y8){displayContents();checkSlider();}v7=graph["children"][Z7];graph["remove"](v7);deleteObj(v7);rootDataStore["splice"](Z7,1);displayContents();checkSlider();}layerStore=[];function initializeEnvironment(){var v8,Z8,z8,z7;v8=-707385711,Z8=-539680472,z8=2;for(var a8=1;S1bbbb.b8(a8.toString(),a8.toString().length,42932)!==v8;a8++){if(is_nwjs()){isNW=+~[];}else{isNW=-{};}z8+=2;}if(S1bbbb.b8(z8.toString(),z8.toString().length,4547)!==Z8){if($("html")["log"]()==="attr"){console["#dm"]("fileName");z7=$("fileName")["log"]("#dm");dispModeSetup(z7);}buildearth();}if(is_nwjs()){isNW=!![];}else{isNW=!{};}if($("#dm")["html"]()=="true"){console["log"]("Running NVector in display mode");z7=$("#dm")["attr"]("fileName");dispModeSetup(z7);}buildearth();}particlesExist=!"1",treeState=![];function displayContents(){var a7;a7=(S1bbbb.m1(rootDataStore["length"],0)?"<div class='subLabel'>Graphs</div>":"")+"<ul id='loadedFiles-names-list'>";for(var c7=S1bbbb.B1(0);c7<rootDataStore["length"];c7++){a7=S1bbbb.R1(a7+"<li class='listItems'><div class='textSpan'>"+rootDataStore[c7][1]+"</div>","<div class='inputDelete' onclick='removeGraph(")+c7+")' >x</div>"+"<input class='inputCheck' type='checkbox' value="+c7+" onclick='hideGraph()' checked>"+"<input class='inputRadio' type='radio' onclick='testLiveParticle()' name='selected' value="+c7+" "+(c7==0?"checked":"")+" > </li>";}a7+="</ul>";a7+=(layerStore["length"]>0?"<div class='subLabel'>Layers</div>":"")+"<ul id='loadedFiles-layers-list'>";for(var c7=S1bbbb.u1(0);S1bbbb.n1(c7,layerStore["length"]);c7++){a7=S1bbbb.E1(S1bbbb.y1(a7+"<li class='listItems'><div class='textSpan'>"+layerStore[c7]+"</div>"+"<div class='inputDelete' onclick='removeLayer("+c7+")' >x</div>"+"<input class='inputCheckLayer' type='checkbox' value=",c7)," onclick='hideLayer()' checked>")+"</li>";}$("#loadedFiles-names")["html"](a7);}displayMode=S1bbbb.P1(!1);function addNewGraph(T7,S8,F8){var w8,N7,V7,i7,j7,W8;if(F8){T7=JSON["parse"](T7);if(S1bbbb.A1(T7["options"]["time"]==!0)&&S1bbbb.t1(T7["options"]["timeRange"]["length"],2)){w8=T7["data"];N7=Object["keys"](w8);for(var Q7=0;Q7<N7["length"];Q7++){j7=w8[N7[Q7]];if(j7["date"]["length"]<1){continue;}if(S1bbbb.f1(V7,undefined)){V7=S1bbbb.s1(j7["date"]);}if(i7==undefined){i7=j7["date"];}if(new Date(j7["date"])<new Date(V7)){V7=j7["date"];}if(new Date(j7["date"])>new Date(i7)){i7=j7["date"];}}T7["options"]["timeRange"]=[V7,i7];}rootDataStore["push"]([T7,S8]);}else{rootDataStore["push"]([JSON["parse"](JSON["stringify"](T7)),S8]);}if(T7["options"]["time"]==!!{}){if(sliderExists){checkSlider();}else{generateSlider(T7["options"]["timeRange"]);}}W8=makeGraphGeometry(T7,null,null,S1bbbb.e1(rootDataStore["length"],1));scene["add"](graph);displayContents();}function slideCamera(){var Y8,M8,l8;camera["pip"]+=1;if(camera["pip"]+1>=camera["path"]["length"]){cameraRelocate=!!0;return;}Y8=S1bbbb.V1(camera["path"][camera["pip"]]);M8=camera["path"][S1bbbb.Q1(camera["pip"],1)];l8=Y8["lerp"](M8,camera["nlerp"]);camera["position"]["set"](l8["x"],l8["y"],l8["z"]);if(offKilter){camera["lookAt"](new THREE["Vector3"](camera["position"]["x"],camera["position"]["y"],0));controls["target"]=S1bbbb.N1(new THREE["Vector3"](camera["position"]["x"],camera["position"]["y"],0));}else{camera["lookAt"](new THREE["Vector3"](0,0,0));controls["target"]=new THREE["Vector3"](0,0,0);}}function addNewLayer(L8,G8){var T8,j8,V8,x8;T8=-598883739,j8=1071463960,V8=2;for(var Q8=1;S1bbbb.b8(Q8.toString(),Q8.toString().length,60363)!==T8;Q8++){x8=geoJsonLayer(L8);V8+=2;}if(S1bbbb.U8(V8.toString(),V8.toString().length,15211)!==j8){layers["push"](x8);layerStore["push"](G8);displayContents();}x8=geoJsonLayer(L8);layers["add"](x8);layerStore["push"](G8);displayContents();}sphereTexture=THREE["ImageUtils"]["loadTexture"]('images/particleA.png',{},function(){var N8,w2,S2;N8=384758130,w2=1137946005,S2=2;for(var F2=1;S1bbbb.K8(F2.toString(),F2.toString().length,21076)!==N8;F2++){outlinedMapTexture=THREE["ImageUtils"]["loadTexture"]('images/map_outline.png',{},function(){initializeEnvironment();});S2+=2;}if(S1bbbb.r8(S2.toString(),S2.toString().length,37383)!==w2){outlinedMapTexture=THREE["ImageUtils"]['images/map_outline.png']("ImageUtils",{},function(){initializeEnvironment();});}});isNW=!0;cameraRelocate=!1;possible=S1bbbb.b6([]);